<%- include('../include/source'); -%>

<html>
    <head>
    <title><%= guild.name %> - Welcomer</title>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Latest compiled and minified CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>

        <link rel="stylesheet" href="/css/index.css">
        <link rel="stylesheet" href="/css/dashboard.css">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">


        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.bundle.min.js"></script>
        <script src="/dashboard.js"></script>
        <script src="https://kit.fontawesome.com/b99e675b6e.js"></script>

    </head>
    <body>

<div class="wrapper">

    <%- include('../include/sidemenu'); -%>

    <!-- Settings -->
    <%- include('../include/header'); -%>

        <section class="content">
        <div class="overview-all">

        <h1>Welcomer</h1>
        <hr style="width: 90%; margin: 20px auto;">

        <form method="POST">
          <div style="position: relative;padding: 15px 0;">
            <button class="btn" name="preview" value="preview" style="right: 0; position: absolute;margin: auto;top: 0;"><i class="bi bi-play-fill"></i>&nbsp; Preview</button>
          </div>

          <button type="submit" class="btn btn-save">
              <i class="fas fa-save"></i>
          </button>
            <div class="row mt-3" style="justify-content: center;">
              <div class=" col-md-6 my-1 cart_mod">
                <div class="">
                    <div style="position: relative;">
                        <%if(welcome && welcome.toggle) { %>
                          <%if(welcome.toggle === "true") {%>
                              <input type="checkbox" class="toggle" name="welcome" style="right: 0; position: absolute;" checked>
                          <% } else if(welcome.toggle === "false") {%>
                              <input type="checkbox" class="toggle" name="welcome" style="right: 0; position: absolute;">
                      <%  } 
                      } else { %>
                        <input type="checkbox" class="toggle" name="welcome" style="right: 0; position: absolute;">
                    <% } %>  
                        <h5 class="text-light feature-title" style="text-align: left; margin-top: 5px;" style="left: 0; position: absolute;">Welcome Channel :</h5>
                    </div>
                </div>
                <hr>
                <select class="input form-select" data-width="100%" data-live-search="true" aria-label="welcome" name="welcomeChannel" >
                        <% guild.channels.cache.filter(c => c.type === Discord.ChannelType.GuildText).sort((a, b) => b.rawPosition - a.rawPosition).forEach((channel, i) => { %>
                          <option value="<%= channel.id%>" 
                            <%= welcome.channel === channel.id ? "selected" : ""%>> <%=channel.name%>
                          </option>
                        <% }) %>
                  </select>
                <p />
              </div>
            </div>
        </section>     
        <!-- Welcome -->
</div>
<script>
var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
  return new bootstrap.Tooltip(tooltipTriggerEl)
})

document.getElementById("welcome").classList.add('btn-sidebar-active');

document.getElementById("welcome").classList.remove('btn-sidebar');


</script>

    </body>
</html>