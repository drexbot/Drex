<%- include('../include/source'); -%>

<html>
    <head>
    <title><%= guild.name %> - History</title>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Latest compiled and minified CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
        
        <link rel="stylesheet" href="/css/index.css">
        <link rel="stylesheet" href="/css/dashboard.css">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    
        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.bundle.min.js"></script>
        <script src="/dashboard.js"></script>
        <script src="https://kit.fontawesome.com/b99e675b6e.js"></script>

    </head>
    <body>

<div class="wrapper">
    <%- include('../include/sidemenu'); -%>

    <!-- Settings -->
    <%- include('../include/header'); -%>

    <!-- Settings -->
  <section class="content">
    <div class="overview-all">
      <h1>History of updates in Dashboard</h1>
      <h6 style="color: #c0c7cd;">( Last 20 Update )</h6>
      <hr style="width: 90%; margin: 20px auto;">
        <form method="POST">
        
      <div class="custom-resposive-table">
        <table>
          <thead class="bg-gray-2">
            <tr>
              <th>User</th>
              <th>Action</th>
              <th>Date</th>
            </tr>
          </thead>
          <tbody>
            <% if(!history) return;
            history.slice(-20).sort(
  (objA, objB) => Number(objB.date) - Number(objA.date),
            ).forEach(history => {
            let user = guild.members.cache.get(history.userId)
            if(user.user.bot) return; %>
            <tr class="bg-command table-border-bottom">
              <td style="min-width: 300px;" class="panelLogs_user-info__mG_7W">
                <img src="<%= user.user.displayAvatarURL() %>" alt="ruxiit">
                <div>
                  <p><%= user.user.username %></p>
                  <p><%= user.user.id %></p>
                </div>
              </td>
              <td style="min-width: 300px;" class="panelLogs_row-action__GO8C5"><%= history.action %></td>
              <td style="min-width: 200px;"><%= moment(history.date).format("DD MMM YYYY hh:mm:ss"); %></td>
            </tr>
            <% }) %>
          </tbody>
        </table>
  </div>
    </div>
  </section>     
        <!-- Welcome -->
</div>
<script>
var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
  return new bootstrap.Tooltip(tooltipTriggerEl)
})

document.getElementById("history").classList.add('btn-sidebar-active');

document.getElementById("levels").classList.remove('btn-sidebar');


</script>

    </body>
</html>


